{{ $url := .url }}
{{ if .url }}
  {{ $pathToRoot := partial "path_to_root.html" (or .page_context.RelPermalink .context.RelPermalink) }}
  {{ $resourcePath := (urls.Parse .url).Path }}
  {{ $resourceFileName := path.Base $resourcePath }}
  {{ $url = (printf "%s/static_resources/%s" (strings.TrimSuffix "/" $pathToRoot) $resourceFileName) }}
{{ end }}
{{ return $url }}
